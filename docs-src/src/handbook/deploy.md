# 同一个域下面工作

整合 IAM 的业务系统，建议与 IAM 放在同一个域下工作。


# 租户

IAM 通过租户`tenant`来区分用户体系。一个租户下的用户 id（`login_id`）不能重复。涉及的租户的数据库表、API 接口均有保存`tenant_id`的字段或入参。
怎么入参比较优雅呢（相对于调接口都要传参`tenant_id`）？我们采用域名区分的方法来划分租户。

- 首先分配一个域名给某个租户，例如 bar.foo.com 但不是根据这个域名关联那个租户
- 在 Nginx 代理中加入自定义头`auth-tenant-id`，表示某个组件，这样就是能在每个接口中获取租户了