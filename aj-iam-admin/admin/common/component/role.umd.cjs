(function(f,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],o):(f=typeof globalThis<"u"?globalThis:f||self,o(f.Role={},f.Vue))})(this,(function(f,o){"use strict";const u="auth_access_token",P="auth_refresh_token",O=async(t,e)=>{console.log("Tokens saved:",{accessToken:t,refreshToken:e}),localStorage.setItem(u,t),localStorage.setItem(P,e),await localStorage.setItem(u,t),localStorage.setItem(u,t),console.log("getItem",localStorage.getItem(u))},B=async()=>await localStorage.getItem(u),F=async()=>"207c3ff6-c55a-4dfd-b926-6682470d5421",L=async()=>{localStorage.removeItem(u),await localStorage.removeItem(P)},U="r3fgD3x43ft5H",A="zKvmMA4KmJ2CIijl9ubqbXpHm1",x="http://127.0.0.1:8082/iam_api/oidc/refresh_token";async function z(){const t=await F();if(!t)throw new Error("No refresh token available");const e={grant_type:"refresh_token",refresh_token:t},i=await fetch(x,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:q(U,A)},body:j(e)});if(!i.ok)throw new Error("Token refresh failed");const s=await i.json(),{status:m,message:p,data:a}=s;if(m===1)return await O(a.id_token,a.refresh_token||t),{accessToken:a.id_token,refreshToken:a.refresh_token||t};throw new Error(`Token refresh failed. Reason: ${p}`)}function q(t,e){if(t.trim()===""||e.trim()==="")throw new Error("Missing the arguments: clientId/clientSecret");const i=`${t}:${e}`;let s;return typeof window<"u"&&window.btoa?s=btoa(unescape(encodeURIComponent(i))):s=Buffer.from(i).toString("base64"),`Basic ${s}`}function j(t){const e=[];for(const[i,s]of Object.entries(t))s!=null&&typeof s!="function"&&e.push(`${encodeURIComponent(i)}=${encodeURIComponent(String(s))}`);return e.join("&")}let k=!1,y=[];const D=(t,e=null)=>{y.forEach(i=>{t?i.reject(t):i.resolve(e)}),y=[]};async function W(t){if(k)return new Promise((e,i)=>{y.push({resolve:e,reject:i})}).then(async()=>await t());k=!0;try{const e=await z();return D(null,e.accessToken),await t()}catch(e){throw D(e,null),L(),e}finally{k=!1}}let E=!1;function V(t,e,i,s,m){const p=()=>new Promise((a,l)=>{let c={...m};B().then(C=>{C&&(c.Authorization=`Bearer ${C}`),e=e.toUpperCase();let h=i;i&&(e==="POST"||e==="PUT")&&(c["Content-Type"]==="application/json"?h=JSON.stringify(i):c["Content-Type"]==="application/x-www-form-urlencoded"&&(h=H(i))),fetch(t,{method:e,headers:c,body:h,credentials:"include"}).then(n=>{if(n.status===404)throw new Error("Not found 404: "+t);if(n.status===500)throw new Error("Server error: "+t);if(n.status===401&&!E)return E=!0,W(()=>p()).finally(()=>{E=!1});if(!n.ok)throw new Error(`Unexpected status: ${n.status}`);return n.json()}).then(n=>{s&&s(n),a()}).catch(n=>{n.message.includes("401")?console.error("Authentication failed, please login again."):console.error("Network error when fetching from: "+t,n),l(n)})})});p().catch(()=>{})}function H(t){const e=[];for(const[i,s]of Object.entries(t))s!=null&&typeof s!="function"&&e.push(`${encodeURIComponent(i)}=${encodeURIComponent(String(s))}`);return e.join("&")}function $(t,e,i){V(t,"GET",null,e,i)}function R(t,e,i,s){V(t,"POST",e,i,{"Content-Type":"application/json",...s})}function J(t,e,i,s){V(t,"PUT",e,i,{"Content-Type":"application/json",...s})}function K(t,e,i){V(t,"DELETE",null,e,i)}function w(t,e,i,s,m){let p={};if(m)for(const l in m)p[l]=m[l];e=e.toUpperCase();let a=i;i&&(e==="POST"||e==="PUT")&&(p["Content-Type"]=="application/json"?a=JSON.stringify(i):p["Content-Type"]=="application/x-www-form-urlencoded"&&(a=G(i))),fetch(t,{method:e,headers:p,body:a,credentials:"include"}).then(l=>{if(l.status===404)throw new Error("Not found 404: "+t);if(l.status===500)throw new Error("Server error: "+t);if(!l.ok)throw new Error(`Unexpected status: ${l.status}`);return l.json()}).then(l=>{s&&s(l)}).catch(l=>{console.error("Network error when fetching from: "+t,l)})}function G(t){const e=[];for(const[i,s]of Object.entries(t))s!=null&&typeof s!="function"&&e.push(`${encodeURIComponent(i)}=${encodeURIComponent(String(s))}`);return e.join("&")}function M(t,e,i){w(t,"GET",null,e,i)}function Q(t,e,i,s){w(t,"POST",e,i,{"Content-Type":"application/json",...s})}function X(t,e,i,s){w(t,"PUT",e,i,{"Content-Type":"application/json",...s})}function b(t,e,i){w(t,"DELETE",null,e,i)}function Y(t){var e,i={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},s,m;/(y+)/.test(t)&&(e=RegExp.$1,t=t.replace(e,String(this.getFullYear()).substr(4-e)));for(s in i)new RegExp("("+s+")").test(t)&&(e=RegExp.$1,m=String(i[s]),m=e.length==1?m:("00"+m).substr(m.length),t=t.replace(e,m));return t}function Z(t,e){return Y.call(new Date(t),e)}const g={afterDelete(t){return function(e){e.status?(t&&t(e),this.$Message.success("删除成功")):this.$Message.info("删除失败。"+e.message)}},delInfo(t){b(`${this.API}/${this.list.data[t].id}`,e=>{e.status?(this.list.data.splice(t,1),this.list.total--,this.$Message.success("删除成功")):this.$Message.info("删除失败。"+e.message)})},id:{title:"#",width:60,key:"id",align:"center"},createDate:{title:"创建日期",width:160,align:"center",render(t,e){return t("div",Z(e.row.createDate,"yyyy-MM-dd hh:mm"))}},tags:{title:"分类标签",minWidth:100,key:"tagsNames",align:"center",ellipsis:!0},status:{title:"状态",width:80,render(t,e){let i="",s="";switch(e.row.stat){case-1:i="草稿",s="gray";break;case 2:s="red",i="禁用";break;case 1:s="red",i="已删除";break;case null:case 0:default:s="green",i="启用"}return t("div",{style:{color:s}},i)}},getPageList(t,e,i){return s=>{s.status?(e.total=s.data.totalCount,e.data=s.data.list,i&&i()):t.$Message.warning(s.message||"获取数据失败")}},copyBeanClean(t){const e=JSON.parse(JSON.stringify(t));return delete e.createDate,delete e.updateDate,delete e.updateDate,delete e.creatorId,delete e.updaterId,delete e.creator,delete e.updater,delete e.extend,e}},_=o.defineComponent({props:{isPickup:{type:Boolean,default:!1},onPickup:{type:Function},simpleApi:{type:String,required:!0}},data(){return{isCreate:!0,isShowEditWin:!1,permissionData:{},columnsDef:[g.id,{title:"权限名称",key:"name"},{title:"权限编码",key:"code",ellipsis:!0},g.status,g.createDate,{title:"操作",slot:"action",width:120}],listData:[],list:{total:0,limit:5,current:1,data:[]},ruleValidate:{name:[{required:!0,message:"该字段非空约束",trigger:"blur"}],code:[{required:!0,message:"该字段非空约束",trigger:"blur"}]}}},mounted(){this.getData()},methods:{getData(t){let e=`${this.simpleApi}/permission/page?pageNo=${this.list.current}&limit=${this.list.limit}`;this.isPickup&&(e+="&q_stat=0"),t&&(e+=`&${t}`),M(e,g.getPageList(this,this.list))},onPageNoChange(t){this.list.current=t,this.getData()},handleChangePageSize(t){this.list.limit=t,this.getData()},pickup(t){},doSearch(t){this.list.current=1,this.getData(`ql_name=${t}&ql_code=${t}`)},showCreate(){this.permissionData={},this.isShowEditWin=!0,this.isCreate=!0},doDelete(t){b(`${this.simpleApi}/permission/${t}`,e=>{e.status&&(this.$Message.success("删除成功"),this.getData())})},edit(t){this.isShowEditWin=!0,this.isCreate=!1,M(`${this.simpleApi}/permission/${t}`,e=>{e.status&&(this.permissionData=e.data)})},save(){let t=g.copyBeanClean(this.permissionData);this.isCreate?Q(`${this.simpleApi}/permission`,e=>{e.status&&(this.$Message.success("创建成功"),this.getData())},t):X(`${this.simpleApi}/permission/${this.permissionData.id}`,e=>{e.status&&(this.$Message.success("修改成功"),this.getData())},t)}},watch:{isPickup(t){if(this.getData(),t){for(let e=0;e<this.columnsDef.length;e++)if(this.columnsDef[e].title==="状态"){this.columnsDef.splice(e,1);break}}}}}),I=(t,e)=>{const i=t.__vccOpts||t;for(const[s,m]of e)i[s]=m;return i},v={style:{"margin-bottom":"20px"}},ee={style:{float:"right"}},te=["onClick"],oe={key:1},ie=["onClick"];function se(t,e,i,s,m,p){const a=o.resolveComponent("Button"),l=o.resolveComponent("Input"),c=o.resolveComponent("Poptip"),C=o.resolveComponent("Table"),h=o.resolveComponent("Page"),n=o.resolveComponent("FormItem"),T=o.resolveComponent("Form"),S=o.resolveComponent("Modal");return o.openBlock(),o.createElementBlock("div",null,[o.createElementVNode("div",v,[o.createElementVNode("span",ee,[t.isPickup?o.createCommentVNode("",!0):(o.openBlock(),o.createBlock(a,{key:0,onClick:t.showCreate,type:"primary",icon:"ios-add",style:{"margin-right":"10px"}},{default:o.withCtx(()=>[...e[7]||(e[7]=[o.createTextVNode("增加权限",-1)])]),_:1},8,["onClick"])),o.createVNode(a,{onClick:e[0]||(e[0]=d=>t.getData()),icon:"ios-refresh"},{default:o.withCtx(()=>[...e[8]||(e[8]=[o.createTextVNode("刷新",-1)])]),_:1})]),o.createVNode(l,{style:{width:"30%"},onOnSearch:t.doSearch,search:"","enter-button":"",placeholder:"权限的名称或编码皆可搜索"},null,8,["onOnSearch"])]),o.createVNode(C,{border:"",columns:t.columnsDef,data:t.list.data,style:{"min-height":"250px"}},{action:o.withCtx(({row:d})=>[t.isPickup?(o.openBlock(),o.createElementBlock("a",{key:0,style:{"margin-right":"5px"},onClick:N=>t.onPickup(d)},"选择",8,te)):o.createCommentVNode("",!0),t.isPickup?o.createCommentVNode("",!0):(o.openBlock(),o.createElementBlock("span",oe,[o.createVNode(c,{confirm:"",title:"确定删除？",onOnOk:N=>t.doDelete(d.id)},{default:o.withCtx(()=>[...e[9]||(e[9]=[o.createElementVNode("a",{style:{"margin-right":"5px",color:"red"},icon:"ios-trash"},"删除",-1)])]),_:2},1032,["onOnOk"]),e[10]||(e[10]=o.createTextVNode(" | ",-1)),o.createElementVNode("a",{style:{"margin-right":"5px",color:"green"},onClick:N=>t.edit(d.id),icon:"ios-edit"},"编辑",8,ie)]))]),_:1},8,["columns","data"]),o.createVNode(h,{style:{margin:"20px auto","text-align":"center"},"page-size":t.list.limit,total:t.list.total,"model-value":t.list.current,onOnChange:t.onPageNoChange,onOnPageSizeChange:t.handleChangePageSize,size:"small","show-total":"","show-elevator":"","show-sizer":""},null,8,["page-size","total","model-value","onOnChange","onOnPageSizeChange"]),o.createVNode(S,{modelValue:t.isShowEditWin,"onUpdate:modelValue":e[6]||(e[6]=d=>t.isShowEditWin=d),title:t.isCreate?"创建权限":"编辑权限"+t.permissionData.id,width:"600",onOnOk:t.save},{default:o.withCtx(()=>[o.createVNode(T,{model:t.permissionData,rules:t.ruleValidate,"label-width":100,style:{"margin-right":"10%","margin-left":"3%"}},{default:o.withCtx(()=>[o.createVNode(n,{label:"权限名称",prop:"name"},{default:o.withCtx(()=>[o.createVNode(l,{modelValue:t.permissionData.name,"onUpdate:modelValue":e[1]||(e[1]=d=>t.permissionData.name=d),placeholder:"请输入权限名称……"},null,8,["modelValue"])]),_:1}),o.createVNode(n,{label:"权限编码",prop:"code"},{default:o.withCtx(()=>[o.createVNode(l,{modelValue:t.permissionData.code,"onUpdate:modelValue":e[2]||(e[2]=d=>t.permissionData.code=d),placeholder:"请输入权限编码……"},null,8,["modelValue"])]),_:1}),o.createVNode(n,{label:"权限说明"},{default:o.withCtx(()=>[o.createVNode(l,{type:"textarea",rows:4,modelValue:t.permissionData.content,"onUpdate:modelValue":e[3]||(e[3]=d=>t.permissionData.content=d),placeholder:"请输入权限说明……"},null,8,["modelValue"])]),_:1}),o.createVNode(n,{label:"权限状态"},{default:o.withCtx(()=>[o.createElementVNode("label",null,[o.withDirectives(o.createElementVNode("input",{type:"radio","onUpdate:modelValue":e[4]||(e[4]=d=>t.permissionData.stat=d),value:"0"},null,512),[[o.vModelRadio,t.permissionData.stat]]),e[11]||(e[11]=o.createTextVNode(" 启用",-1))]),e[13]||(e[13]=o.createTextVNode("   ",-1)),o.createElementVNode("label",null,[o.withDirectives(o.createElementVNode("input",{type:"radio","onUpdate:modelValue":e[5]||(e[5]=d=>t.permissionData.stat=d),value:"2"},null,512),[[o.vModelRadio,t.permissionData.stat]]),e[12]||(e[12]=o.createTextVNode(" 禁用",-1))])]),_:1}),t.isCreate?o.createCommentVNode("",!0):(o.openBlock(),o.createBlock(n,{key:0,style:{color:"gray"}},{default:o.withCtx(()=>[o.createTextVNode(" 创建于 "+o.toDisplayString(t.permissionData.createDate)+" 修改于 "+o.toDisplayString(t.permissionData.updateDate),1)]),_:1}))]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title","onOnOk"])])}const ne=I(_,[["render",se]]),re=o.defineComponent({components:{PermissionMgr:ne},data(){return{simpleApi:"http://localhost:8082/iam_api/common_api",permissionApi:"http://localhost:8082/iam_api/permission",isShisShowRoleEditForm:!1,isShowPermissionMgr:!1,isPermissionMgrPickup:!0,currentRole:{name:""},permission:{inheritPermissionList:[],permissionList:[]},selectedPermissions:[],contextData:null,roleTreeData:[],roleForm:{isTop:!1,isCreate:!1}}},mounted(){this.refreshRoleList()},methods:{handleContextMenu(t){this.contextData=t},editRole(){this.roleForm.isCreate=!1,this.isShisShowRoleEditForm=!0,this.roleForm.isTop=this.contextData.parentId==-1,$(`${this.simpleApi}/role/${this.contextData.id}`,t=>{t.status?this.currentRole=t.data:this.$Message.warning(t.message||"获取数据失败")})},createTopRoleNode(){this.roleForm.isTop=!0,this.roleForm.isCreate=!0,this.currentRole={},this.contextData={id:-1},this.isShisShowRoleEditForm=!0},delRole(){let t=this.contextData.title;this.$Modal.confirm({title:"删除角色",content:`<p>确定删除 ${t} 这个节点吗？<br />注意：该节点下<b>所有的子节点</b>也会一并被删除！</p>`,onOk:()=>{K(`${this.permissionApi}/role/${this.contextData.id}`,e=>{e.status?(this.$Message.success("删除成功"),this.refreshRoleList()):this.$Message.warning(e.message||"获取数据失败")})}})},addSubNode(){this.roleForm.isTop=!1,this.roleForm.isCreate=!0,this.currentRole={},this.isShisShowRoleEditForm=!0},refreshRoleList(){$(`${this.permissionApi}/role_tree`,t=>{t.status?this.roleTreeData=t.data:this.$Message.warning(t.message||"获取数据失败")})},saveRole(){let t=g.copyBeanClean(this.currentRole);t.parentId=this.contextData.id,this.roleForm.isCreate?R(`${this.simpleApi}/role`,e=>{e.status&&(this.$Message.success("创建成功"),this.refreshRoleList())},t):J(`${this.simpleApi}/role/${t.id}`,e=>{e.status&&(this.$Message.success("修改成功"),this.refreshRoleList())},t)},onTreeNodeClk(t,e){this.currentRole={name:e.title,id:e.id}},addPermission(){this.showPermissionMgr(!0)},removePermission(){for(const t of this.selectedPermissions){const e=this.permission.permissionList.findIndex(i=>i.id===t);e!==-1&&this.permission.permissionList.splice(e,1)}},clearPermission(){this.permission.permissionList=[]},savePermission(){let t=[];this.permission.permissionList.forEach(i=>t.push(i.id));let e={roleId:this.currentRole.id,permissionIds:t.join(",")};R(`${this.permissionApi}/add_permissions_to_role`,i=>{i.status&&this.$Message.success("保存权限成功")},e)},showPermissionMgr(t){this.isShowPermissionMgr=!0,this.isPermissionMgrPickup=t},pickupPermission(t){let e=this.permission.permissionList;for(let i=0;i<e.length;i++)if(e[i].id==t.id){this.$Message.warning("已经添加了权限"+t.name);return}this.permission.permissionList.push({id:t.id,name:t.name}),this.$Message.success(`添加权限[${t.name}]成功`)},handlePermissionList(t){this.permission.inheritPermissionList=[],this.permission.permissionList=[],t.forEach(e=>{e.isInherit?this.permission.inheritPermissionList.push(e):this.permission.permissionList.push({id:e.id,name:e.name})})}},watch:{currentRole(t){t&&t.id&&$(`${this.permissionApi}/permission_list_by_role/${t.id}`,e=>{e.status?this.handlePermissionList(e.data):this.$Message.warning(e.message||"获取数据失败")})}}}),le={class:"main"},ae={class:"left"},de={class:"btns"},me={class:"tree"},pe={class:"right"},ce={class:"panel"},he={class:"inherited-permission"},fe={key:0},ue={key:0,style:{"font-weight":"normal","font-size":"14px"}},ge={class:"permission-list"},Ce=["value"],Ve={class:"permission-bts"};function we(t,e,i,s,m,p){const a=o.resolveComponent("Button"),l=o.resolveComponent("Icon"),c=o.resolveComponent("DropdownItem"),C=o.resolveComponent("Tree"),h=o.resolveComponent("Input"),n=o.resolveComponent("FormItem"),T=o.resolveComponent("Checkbox"),S=o.resolveComponent("Form"),d=o.resolveComponent("Modal"),N=o.resolveComponent("PermissionMgr");return o.openBlock(),o.createElementBlock("div",null,[o.createElementVNode("div",le,[o.createElementVNode("div",ae,[o.createElementVNode("div",null,[o.createElementVNode("span",de,[o.createVNode(a,{type:"primary",icon:"ios-add",onClick:t.createTopRoleNode},{default:o.withCtx(()=>[...e[9]||(e[9]=[o.createTextVNode("创建顶级角色",-1)])]),_:1},8,["onClick"]),o.createVNode(a,{type:"info",icon:"ios-refresh",onClick:t.refreshRoleList},{default:o.withCtx(()=>[...e[10]||(e[10]=[o.createTextVNode("刷新",-1)])]),_:1},8,["onClick"])])]),e[14]||(e[14]=o.createElementVNode("h2",null,"角色管理",-1)),o.createElementVNode("div",me,[o.createVNode(C,{data:t.roleTreeData,onOnSelectChange:t.onTreeNodeClk,onOnContextmenu:t.handleContextMenu},{contextMenu:o.withCtx(()=>[o.createVNode(c,{onClick:t.editRole,style:{color:"cornflowerblue"}},{default:o.withCtx(()=>[o.createVNode(l,{type:"ios-create-outline"}),e[11]||(e[11]=o.createTextVNode(" 编辑角色 ",-1))]),_:1},8,["onClick"]),o.createVNode(c,{onClick:t.addSubNode,style:{color:"green"}},{default:o.withCtx(()=>[o.createVNode(l,{type:"md-add"}),e[12]||(e[12]=o.createTextVNode(" 添加子节点 ",-1))]),_:1},8,["onClick"]),o.createVNode(c,{onClick:t.delRole,style:{color:"#ed4014"}},{default:o.withCtx(()=>[o.createVNode(l,{type:"md-close"}),e[13]||(e[13]=o.createTextVNode(" 删除角色 ",-1))]),_:1},8,["onClick"])]),_:1},8,["data","onOnSelectChange","onOnContextmenu"])])]),o.createElementVNode("div",pe,[e[23]||(e[23]=o.createElementVNode("p",{class:"note"}," 你可以维护角色的权限，可以给角色分配权限，也可以给角色分配子角色。一个角色对应多个权限；角色可以继承，拥有父级的所有权限。 ",-1)),o.createElementVNode("fieldset",ce,[e[15]||(e[15]=o.createElementVNode("legend",null,"通过继承父级的权限：",-1)),o.createElementVNode("div",he,[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(t.permission.inheritPermissionList,(r,ke)=>(o.openBlock(),o.createElementBlock("span",{key:r.id},[o.createTextVNode(o.toDisplayString(r.roleName)+"-"+o.toDisplayString(r.name)+" ",1),ke<t.permission.inheritPermissionList.length-1?(o.openBlock(),o.createElementBlock("span",fe,"、")):o.createCommentVNode("",!0)]))),128))])]),e[24]||(e[24]=o.createElementVNode("br",null,null,-1)),e[25]||(e[25]=o.createElementVNode("br",null,null,-1)),o.createElementVNode("div",null,[o.createElementVNode("h2",null,[o.createTextVNode(o.toDisplayString(t.currentRole?"角色 "+t.currentRole.name+" 的权限":"请选择一个角色")+" ",1),t.currentRole.id==null?(o.openBlock(),o.createElementBlock("span",ue,"请从左侧选择一个角色以继续操作")):o.createCommentVNode("",!0)]),o.createElementVNode("div",ge,[o.withDirectives(o.createElementVNode("select",{multiple:"","onUpdate:modelValue":e[0]||(e[0]=r=>t.selectedPermissions=r)},[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(t.permission.permissionList,r=>(o.openBlock(),o.createElementBlock("option",{key:r.name,value:r.id},o.toDisplayString(r.name),9,Ce))),128))],512),[[o.vModelSelect,t.selectedPermissions]]),o.createElementVNode("div",Ve,[o.createVNode(a,{disabled:t.currentRole.id==null,type:"primary",icon:"ios-add",onClick:t.addPermission},{default:o.withCtx(()=>[...e[16]||(e[16]=[o.createTextVNode("添加权限",-1)])]),_:1},8,["disabled","onClick"]),o.createVNode(a,{disabled:!t.selectedPermissions.length,type:"warning",icon:"ios-remove",onClick:t.removePermission},{default:o.withCtx(()=>[...e[17]||(e[17]=[o.createTextVNode("移除权限",-1)])]),_:1},8,["disabled","onClick"]),o.createVNode(a,{disabled:t.currentRole.id==null,type:"error",icon:"ios-close",onClick:t.clearPermission},{default:o.withCtx(()=>[...e[18]||(e[18]=[o.createTextVNode("清空权限",-1)])]),_:1},8,["disabled","onClick"]),e[20]||(e[20]=o.createElementVNode("br",null,null,-1)),o.createVNode(a,{disabled:t.currentRole.id==null,type:"success",icon:"ios-add-circle-outline",onClick:t.savePermission},{default:o.withCtx(()=>[...e[19]||(e[19]=[o.createTextVNode("   保 存   ",-1)])]),_:1},8,["disabled","onClick"])]),o.createElementVNode("p",null,[e[21]||(e[21]=o.createTextVNode("增加、删除权限请到",-1)),o.createElementVNode("a",{onClick:e[1]||(e[1]=r=>t.showPermissionMgr(!1))},"权限管理"),e[22]||(e[22]=o.createTextVNode("。",-1))])])])])]),o.createVNode(d,{modelValue:t.isShisShowRoleEditForm,"onUpdate:modelValue":e[7]||(e[7]=r=>t.isShisShowRoleEditForm=r),title:"角色"+(t.roleForm.isCreate?"":" #"+t.currentRole.id),onOnOk:t.saveRole},{default:o.withCtx(()=>[o.createVNode(S,{model:t.currentRole,"label-width":100,style:{"margin-right":"10%","margin-left":"3%"}},{default:o.withCtx(()=>[o.createVNode(n,{label:"角色名称"},{default:o.withCtx(()=>[o.createVNode(h,{modelValue:t.currentRole.name,"onUpdate:modelValue":e[2]||(e[2]=r=>t.currentRole.name=r),placeholder:"Enter something..."},null,8,["modelValue"])]),_:1}),o.createVNode(n,{label:"角色说明"},{default:o.withCtx(()=>[o.createVNode(h,{type:"textarea",rows:4,modelValue:t.currentRole.content,"onUpdate:modelValue":e[3]||(e[3]=r=>t.currentRole.content=r),placeholder:"Enter something..."},null,8,["modelValue"])]),_:1}),t.roleForm.isTop?o.createCommentVNode("",!0):(o.openBlock(),o.createBlock(n,{key:0},{default:o.withCtx(()=>[o.createVNode(T,{modelValue:t.currentRole.isInheritedParent,"onUpdate:modelValue":e[4]||(e[4]=r=>t.currentRole.isInheritedParent=r)},{default:o.withCtx(()=>[...e[26]||(e[26]=[o.createTextVNode("继承父级权限",-1)])]),_:1},8,["modelValue"])]),_:1})),o.createVNode(n,{label:"角色状态"},{default:o.withCtx(()=>[o.createElementVNode("label",null,[o.withDirectives(o.createElementVNode("input",{type:"radio","onUpdate:modelValue":e[5]||(e[5]=r=>t.currentRole.stat=r),value:"0"},null,512),[[o.vModelRadio,t.currentRole.stat]]),e[27]||(e[27]=o.createTextVNode(" 启用",-1))]),e[29]||(e[29]=o.createTextVNode("   ",-1)),o.createElementVNode("label",null,[o.withDirectives(o.createElementVNode("input",{type:"radio","onUpdate:modelValue":e[6]||(e[6]=r=>t.currentRole.stat=r),value:"2"},null,512),[[o.vModelRadio,t.currentRole.stat]]),e[28]||(e[28]=o.createTextVNode(" 禁用",-1))])]),_:1}),t.roleForm.isCreate?o.createCommentVNode("",!0):(o.openBlock(),o.createBlock(n,{key:1,style:{color:"gray"}},{default:o.withCtx(()=>[o.createTextVNode(" 创建于 "+o.toDisplayString(t.currentRole.createDate)+" ",1),e[30]||(e[30]=o.createElementVNode("br",null,null,-1)),o.createTextVNode(" 修改于 "+o.toDisplayString(t.currentRole.updateDate),1)]),_:1}))]),_:1},8,["model"])]),_:1},8,["modelValue","title","onOnOk"]),o.createVNode(d,{modelValue:t.isShowPermissionMgr,"onUpdate:modelValue":e[8]||(e[8]=r=>t.isShowPermissionMgr=r),width:"1000",title:"权限管理列表"},{default:o.withCtx(()=>[o.createVNode(N,{"is-pickup":t.isPermissionMgrPickup,"on-pickup":t.pickupPermission,"simple-api":t.simpleApi},null,8,["is-pickup","on-pickup","simple-api"])]),_:1},8,["modelValue"])])}const Ne=I(re,[["render",we],["__scopeId","data-v-55e27d44"]]);f.Role=Ne,Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})}));
