<!DOCTYPE html>
<html>
<head>
    <title>User</title>
    <link rel="stylesheet" href="../common/common.css" />
    <link rel="stylesheet" href="../common/admin.css" />

    <link href="https://cdn.bootcss.com/font-awesome/5.13.0/css/all.css" rel="stylesheet">
    <script src="https://cdn.bootcdn.net/ajax/libs/vue/2.6.14/vue.min.js"></script>
    <script src="../common/common.js"></script>
</head>

<body class="inner-page">
<h2>用户管理</h2>

<div id="vue">
    <div class="btns" align="right">
        <a href="#" @click="isShowCreate = true"><span style="color:green">➕</span> 添加</a>
    </div>
    <table class="list-table">
        <thead>
        <tr>
            <th>id</th>
            <th>用户名称</th>
            <th>性别</th>
            <th>出生日期</th>
            <th>头像</th>
            <th>注册日期</th>
            <th>状态</th>
            <th>操作</th>
        </tr>
        </thead>
        <tr v-for="(item) in mapList">
            <td>{{item.id}}</td>
            <td>
                <span v-show="editingId != item.id">{{item.name}}</span>
                <input type="text" v-show="editingId == item.id" v-model="item.name"/>
            </td>
            <td>
                <span v-show="editingId != item.id">{{GENDER[item.gender]}}</span>
                <input type="text" v-show="editingId == item.id" v-model="item.gender"/>
            </td>
            <td>
                <span v-show="editingId != item.id">{{item.birthday.split(' ')[0]}}</span>
                <input type="text" v-show="editingId == item.id" v-model="item.birthday"/>
            </td>
            <td>
                <span v-show="editingId != item.id">{{item.avatar}}</span>
                <input type="text" v-show="editingId == item.id" v-model="item.avatar"/>
            </td>

            <td>
                <span v-show="editingId != item.id">{{item.createDate.slice(0, -3)}}</span>
                <input type="text" v-show="editingId == item.id" v-model="item.createDate"/>
            </td>
            <td>
                <select v-model="item.stat" style="width:80px">
                    <option value="0">正常</option>
                    <option value="1">已禁用</option>
                    <option value="2">已删除</option>
                </select>
            </td>

            <td>
                <a href="#">关联账号</a> |
                <a href="#" @click="del(item.id)" v-show="editingId != item.id"><span style="color:red">✖</span>
                    删除</a>
                <a href="#" @click="save(item)" v-show="editingId == item.id"><span style="color:green">✔</span>
                    保存</a>
                |
                <a href="#" @click="editingId = item.id" v-show="editingId != item.id">编辑</a>
                <a href="#" @click="editingId = 0" v-show="editingId == item.id"> 取消</a>
            </td>
        </tr>
        <tr :class="{hide: !isShowCreate}">
            <td></td>
            <td><input type="text" v-model="create.name"/></td>
            <td>
                <select v-model="create.objGroup">
                    <option v-for="(k, v) in OBJECT_GROUP" :value="v">
                        {{k}}-{{v}}
                    </option>
                </select>
            </td>
            <td>
                <select v-model="create.objType">
                    <option v-for="(k, v) in OBJECT_TYPE" :value="v">
                        {{k}}-{{v}}
                    </option>
                </select>
            </td>
            <td>
                <select v-model="create.combatParty" style="width:80px">
                    <option value="1">红方-1</option>
                    <option value="2">蓝方-2</option>
                    <option value="3">中立（如红十字会医院等）-3</option>
                    <option value="4">情报（针对拍摄的图片）-4</option>
                </select>
            </td>
            <td>
                <input type="text" v-model="create.objTypeImg" placeholder="对象类型图标" style="width:150px"/>
            </td>
            <td>
                <input type="number" v-model="create.objTypeNum" placeholder="对象类型预设数量" style="width:50px"/>
            </td>
            <td>
                <a href="#" @click="doCreate">新增</a> | <a href="#" @click="isShowCreate = false">取消</a>
            </td>
        </tr>

    </table>
</div>

<script src="user.js"></script>
</body>
</html>