<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>IAM 管理登录</title>
    <link rel="stylesheet" href="../common/common.css" />
    <!-- Font Awesome CSS-->
    <!-- <link href="https://cdn.bootcss.com/font-awesome/5.13.0/css/all.css" rel="stylesheet"> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" />
    <script src="../common/common.js"></script>
    <style>
        html,
        body {
           height: 100%;
           overflow: hidden;
        }
    </style>
    <script>

    </script>
</head>

<body>
<table width="100%" style="height:100%;">
    <tr>
        <td align="center" valign="middle">
            <fieldset class="fieldset-box" style="width:350px;">
                <legend>IAM 管理登录</legend>

                <input class="text-input-1" type="text" name="userName" placeholder="用户名" />
                <br />
                <br />
                <input class="text-input-1" type="password" name="password" placeholder="密码" />
                <br />
                <br /><div id="captcha-el"></div>
                <br />
                <button class="button-1" onclick="login();return false;">登录</button>
                <br />
                <br />
                <a href="../register">注册用户</a>
            </fieldset>
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
        </td>
    </tr>
</table>
</body>
<script>
        function login() {
            let userName = document.querySelector('*[name=userName]').value;
            let password = document.querySelector('*[name=password]').value;

            aj.xhr.postForm('../../iam_api/user/login', { loginId: userName, password: password }, json => {
                if (json.status) {
                    location.assign('../oidc/authorization' + location.search);
                }
            });
        }
	</script>
</html>